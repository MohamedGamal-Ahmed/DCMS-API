<UserControl x:Class="DCMS.WPF.Views.Components.SkeletonLoaderView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="ParentControl">
    <ItemsControl ItemsSource="{Binding Rows, ElementName=ParentControl}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid Margin="0,8" HorizontalAlignment="Left">
                    <Grid.Width>
                        <MultiBinding Converter="{StaticResource RandomWidthConverter}">
                            <Binding Path="." />
                            <Binding ElementName="ParentControl" Path="ActualWidth" />
                        </MultiBinding>
                    </Grid.Width>

                    <Border Height="25" CornerRadius="6" Background="#F0F2F5" />
                    
                    <Border Height="25" CornerRadius="6" ClipToBounds="True">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="Transparent" Offset="0" />
                                <GradientStop Color="#80FFFFFF" Offset="0.5" />
                                <GradientStop Color="Transparent" Offset="1" />
                                
                                <LinearGradientBrush.RelativeTransform>
                                    <TranslateTransform x:Name="ShimmerTransform" X="-1.5" />
                                </LinearGradientBrush.RelativeTransform>
                            </LinearGradientBrush>
                        </Border.Background>
                        
                        <Border.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="ShimmerTransform"
                                                         Storyboard.TargetProperty="X"
                                                         From="-1.5" To="1.5"
                                                         Duration="0:0:1.2">
                                            <DoubleAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseInOut" />
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Border.Triggers>
                    </Border>
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</UserControl>
