<Window x:Class="DCMS.WPF.Views.AddMeetingDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding DialogTitle}" 
        Width="550" 
        Height="650"
        WindowStartupLocation="CenterOwner"
        FlowDirection="RightToLeft"
        ResizeMode="NoResize">
    
    <Border Background="#F5F5F5" Padding="20">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Title -->
                <TextBlock Text="عنوان الاجتماع *" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}" 
                         Height="35" FontSize="14" Padding="5" Margin="0,0,0,15"/>

                <!-- Description -->
                <TextBlock Text="الوصف" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Description}" 
                         Height="80" FontSize="14" Padding="5" 
                         TextWrapping="Wrap" AcceptsReturn="True" 
                         VerticalScrollBarVisibility="Auto" Margin="0,0,0,15"/>

                <!-- Date -->
                <TextBlock Text="التاريخ *" FontWeight="Bold" Margin="0,0,0,5"/>
                <DatePicker SelectedDate="{Binding StartDate}" 
                            Height="35" FontSize="14" Margin="0,0,0,15"/>

                <!-- Time Grid -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Start Time -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="وقت البداية *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="cmbStartTime" Height="35" FontSize="14" 
                                  ItemsSource="{Binding AvailableTimes}"
                                  SelectedValue="{Binding SelectedStartTime}">
                        </ComboBox>
                    </StackPanel>

                    <!-- End Time -->
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="وقت النهاية *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="cmbEndTime" Height="35" FontSize="14" 
                                  ItemsSource="{Binding AvailableTimes}"
                                  SelectedValue="{Binding SelectedEndTime}">
                        </ComboBox>
                    </StackPanel>
                </Grid>

                <!-- Location -->
                <TextBlock Text="المكان" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Location}" Height="35" FontSize="14" Padding="5" Margin="0,0,0,15"/>

                <!-- Attendees -->
                <TextBlock Text="الحضور (افصل بفاصلة)" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Attendees}" Height="35" FontSize="14" Padding="5" Margin="0,0,0,15"/>

                <!-- Meeting Type -->
                <TextBlock Text="نوع الاجتماع" FontWeight="Bold" Margin="0,0,0,5"/>
                <ComboBox x:Name="cmbMeetingType" Height="35" FontSize="14" Margin="0,0,0,15" SelectedIndex="{Binding MeetingTypeIndex}">
                    <ComboBoxItem Content="اجتماع" Tag="0"/>
                    <ComboBoxItem Content="أون لاين" Tag="1"/>
                    <ComboBoxItem Content="سفر" Tag="2"/>
                    <ComboBoxItem Content="إجازة قومية" Tag="3"/>
                    <ComboBoxItem Content="لجنة" Tag="4"/>
                    <ComboBoxItem Content="مقابلة" Tag="5"/>
                    <ComboBoxItem Content="دورة تدريبية" Tag="6"/>
                    <ComboBoxItem Content="امتحان" Tag="7"/>
                    <ComboBoxItem Content="ورشة عمل" Tag="8"/>
                </ComboBox>

                <!-- New Analysis Fields -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Is Online Checkbox -->
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="أون لاين؟" FontWeight="Bold" Margin="0,0,5,5"/>
                        <CheckBox IsChecked="{Binding IsOnline}" Content="نعم" FontSize="14"/>
                    </StackPanel>

                    <!-- Country -->
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="الدولة / السوق (للخارج)" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding Country}" Height="35" FontSize="14" Padding="5"/>
                    </StackPanel>
                </Grid>

                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Related Project -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="المشروع ذو الصلة" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding RelatedProject}" Height="35" FontSize="14" Padding="5"/>
                    </StackPanel>

                    <!-- Related Partner -->
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="الشريك / الجهة" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding RelatedPartner}" Height="35" FontSize="14" Padding="5"/>
                    </StackPanel>
                </Grid>

                <!-- Online Meeting Link -->
                <TextBlock Text="رابط الاجتماع أونلاين" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding OnlineMeetingLink}" Height="35" FontSize="14" Padding="5" Margin="0,0,0,15"/>

                <!-- Recurrence -->
                <TextBlock Text="التكرار" FontWeight="Bold" Margin="0,0,0,5"/>
                <ComboBox x:Name="cmbRecurrence" Height="35" FontSize="14" Margin="0,0,0,10" SelectedIndex="0">
                    <ComboBoxItem Content="لا يتكرر"/>
                    <ComboBoxItem Content="يومي"/>
                    <ComboBoxItem Content="أسبوعي"/>
                    <ComboBoxItem Content="شهري"/>
                    <ComboBoxItem Content="سنوي"/>
                </ComboBox>

                <!-- Recurrence Count -->
                <TextBlock Text="عدد مرات التكرار" FontWeight="Bold" Margin="0,0,0,5"/>
                <ComboBox x:Name="cmbRecurrenceCount" Height="35" FontSize="14" Margin="0,0,0,15" SelectedIndex="0">
                    <ComboBoxItem Content="2 مرات"/>
                    <ComboBoxItem Content="3 مرات"/>
                    <ComboBoxItem Content="4 مرات"/>
                    <ComboBoxItem Content="5 مرات"/>
                    <ComboBoxItem Content="10 مرات"/>
                    <ComboBoxItem Content="20 مرة"/>
                </ComboBox>

                <!-- Reminder -->
                <TextBlock Text="تذكير قبل" FontWeight="Bold" Margin="0,0,0,5"/>
                <ComboBox x:Name="cmbReminder" Height="35" FontSize="14" Margin="0,0,0,20" SelectedIndex="1">
                    <ComboBoxItem Content="5 دقائق"/>
                    <ComboBoxItem Content="15 دقيقة"/>
                    <ComboBoxItem Content="30 دقيقة"/>
                    <ComboBoxItem Content="ساعة"/>
                    <ComboBoxItem Content="بدون تذكير"/>
                </ComboBox>

                <!-- Buttons -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" 
                            Content="حفظ" 
                            Command="{Binding SaveCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                            Height="45" 
                            FontSize="16" 
                            FontWeight="Bold"
                            Background="#4CAF50" 
                            Foreground="White"
                            BorderThickness="0"
                            Cursor="Hand">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="5"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                    <Button Grid.Column="2" 
                            Content="إلغاء" 
                            Command="{Binding CancelCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                            Height="45" 
                            FontSize="16"
                            Background="#E0E0E0" 
                            Foreground="#333"
                            BorderThickness="0"
                            Cursor="Hand">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="5"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Border>
</Window>
